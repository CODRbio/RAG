{
  "database": {
    "url": "sqlite:///data/rag.db",
    "echo": false
  },
  "llm": {
    "default": "claude",
    "dry_run": false,
    "providers": {
      "openai": {
        "api_key": "sk-proj-xxx",
        "base_url": "https://api.openai.com/v1",
        "default_model": "gpt-5.2",
        "models": {
          "gpt-5-mini": "gpt-5-mini",
          "gpt-5.2": "gpt-5.2"
        },
        "params": {}
      },
      "openai-thinking": {
        "api_key": "sk-proj-xxx",
        "base_url": "https://api.openai.com/v1",
        "default_model": "gpt-5.2",
        "models": {
          "gpt-5.2": "gpt-5.2"
        },
        "params": {
          "reasoning_effort": "high"
        }
      },
      "deepseek": {
        "api_key": "sk-xxx",
        "base_url": "https://api.deepseek.com/v1",
        "default_model": "deepseek-chat",
        "models": {
          "deepseek-chat": "deepseek-chat"
        },
        "params": {}
      },
      "deepseek-thinking": {
        "api_key": "sk-xxx",
        "base_url": "https://api.deepseek.com/v1",
        "default_model": "deepseek-reasoner",
        "models": {
          "deepseek-reasoner": "deepseek-reasoner"
        },
        "params": {}
      },
      "gemini": {
        "api_key": "AIzxxx",
        "base_url": "https://generativelanguage.googleapis.com/v1beta/openai",
        "default_model": "gemini-pro-latest",
        "models": {
          "gemini-pro-latest": "gemini-pro-latest",
          "gemini-flash-latest": "gemini-flash-latest"
        },
        "params": {}
      },
      "gemini-thinking": {
        "api_key": "AIzxxx",
        "base_url": "https://generativelanguage.googleapis.com/v1beta/openai",
        "default_model": "gemini-pro-latest",
        "models": {
          "gemini-pro-latest": "gemini-pro-latest",
          "gemini-flash-latest": "gemini-flash-latest"
        },
        "params": {
          "reasoning_effort": "high"
        }
      },
      "gemini-vision": {
        "api_key": "AIzxxx",
        "base_url": "https://generativelanguage.googleapis.com/v1beta/openai",
        "default_model": "gemini-2.5-flash",
        "models": {
          "gemini-pro-latest": "gemini-pro-latest",
          "gemini-flash-latest": "gemini-flash-latest",
          "gemini-2.5-flash": "gemini-2.5-flash"
        },
        "params": {
          "temperature": 0.2,
          "max_tokens": 8192
        }
      },
      "claude": {
        "api_key": "sk-ant-xxx",
        "base_url": "https://api.anthropic.com",
        "default_model": "claude-sonnet-4-5",
        "models": {
          "claude-sonnet-4-5": "claude-sonnet-4-5-20250929",
          "claude-haiku-4-5": "claude-haiku-4-5-20251001",
          "claude-opus-4-5": "claude-opus-4-5-20251101"
        },
        "params": {}
      },
      "claude-thinking": {
        "api_key": "sk-ant-xxx",
        "base_url": "https://api.anthropic.com",
        "default_model": "claude-sonnet-4-5",
        "models": {
          "claude-sonnet-4-5": "claude-sonnet-4-5-20250929",
          "claude-haiku-4-5": "claude-haiku-4-5-20251001",
          "claude-opus-4-5": "claude-opus-4-5-20251101"
        },
        "params": {
          "thinking": {
            "type": "enabled",
            "budget_tokens": 16000
          },
          "max_tokens": 32000
        }
      },
      "kimi": {
        "api_key": "sk-xxx",
        "base_url": "https://api.moonshot.ai/v1",
        "default_model": "kimi-k2.5",
        "models": {
          "kimi-k2.5": "kimi-k2.5"
        },
        "params": {}
      },
      "kimi-vision": {
        "api_key": "sk-xxx",
        "base_url": "https://api.moonshot.ai/v1",
        "default_model": "kimi-k2.5",
        "models": {
          "kimi-k2.5": "kimi-k2.5"
        },
        "params": {
          "response_format": {
            "type": "json_object"
          }
        }
      },
      "kimi-thinking": {
        "api_key": "sk-xxx",
        "base_url": "https://api.moonshot.ai/v1",
        "default_model": "kimi-k2.5",
        "models": {
          "kimi-k2.5": "kimi-k2.5"
        },
        "params": {
          "enable_reasoning": true,
          "reasoning_effort": "high"
        }
      }
    }
  },
  "parser": {
    "version": "1.0.0",
    "docling_ocr": false,
    "column_gap_min_ratio": 0.02,
    "column_gap_max_ratio": 0.15,
    "gravity_max_v_down_ratio": 0.06,
    "gravity_min_x_overlap": 0.30,
    "gravity_cross_page_penalty": 0.20,
    "caption_patterns": ["^(Fig\\.|Figure)\\s*\\d+", "^图\\s*\\d+"],
    "table_title_patterns": ["^Table\\s*\\d+", "^Tab\\.\\s*\\d+", "^表\\s*\\d+"],
    "table_footnote_patterns": ["^Note:", "^\\*", "^注[：:]", "^Source:"],
    "llm_text_provider": "deepseek",
    "llm_vision_provider": "gemini-vision",
    "llm_text_model": null,
    "llm_vision_model": null,
    "llm_vision_concurrency": 1,
    "llm_text_max_tokens": 500,
    "llm_vision_max_tokens": 1024,
    "llm_json_repair_max_tokens": 800,
    "llm_temperature": 0.1,
    "llm_max_retries": 2,
    "enrich_tables": true,
    "enrich_figures": true
  },
  "chunk": {
    "target_chars": 1000,
    "min_chars": 200,
    "max_chars": 1800,
    "overlap_sentences": 2,
    "table_rows_per_chunk": 10
  },
  "search": {
    "top_k": 10,
    "rerank_top_k": 5,
    "rrf_k": 60,
    "dense_recall_k": 80,
    "sparse_recall_k": 80,
    "rrf_dense_weight": 0.6,
    "rrf_sparse_weight": 0.4,
    "rerank_input_k": 100,
    "rerank_output_k": 10,
    "per_doc_cap": 3,
    "reranker_mode": "cascade",
    "use_colbert_reranker": true,
    "colbert_model": "jinaai/jina-colbert-v2",
    "colbert_top_k": 30
  },
  "web_search": {
    "enabled": true,
    "provider": "tavily",
    "api_key": "",
    "search_depth": "advanced",
    "max_results": 5,
    "include_answer": true,
    "include_domains": [],
    "exclude_domains": [],
    "enable_query_optimizer": true,
    "enable_query_expansion": false,
    "query_expansion_llm": "deepseek",
    "max_queries": 4
  },
  "semantic_scholar": {
    "enabled": false,
    "api_key": "",
    "base_url": "https://ai4scholar.net/graph/v1",
    "max_results": 5,
    "timeout_seconds": 30
  },
  "ncbi": {
    "_comment": "NCBI PubMed E-Utilities（免费，api_key 可选——填写后速率从 3 req/s 提升至 10 req/s）",
    "_api_key_note": "在 https://www.ncbi.nlm.nih.gov/account/ 注册后可在账号设置中申请 API Key",
    "enabled": true,
    "api_key": "",
    "max_results": 5,
    "timeout_seconds": 20,
    "cache_ttl_seconds": 3600,
    "cache_maxsize": 256
  },
  "citation": {
    "key_format": "author_date",
    "hash_length": 12,
    "author_date_max_authors": 2,
    "merge_level": "document"
  },
  "auto_complete": {
    "enabled": true,
    "max_sections": 6,
    "max_words_per_section": 500,
    "include_abstract": true,
    "default_search_mode": "hybrid"
  },
  "performance": {
    "retrieval": {
      "timeout_seconds": 60,
      "cache_enabled": false,
      "cache_ttl_seconds": 3600,
      "parallel_dense_sparse": true,
      "max_workers": 4
    },
    "llm": {
      "timeout_seconds": 120,
      "max_retries": 2,
      "retry_backoff": 1.5,
      "cache_enabled": false,
      "cache_ttl_seconds": 3600,
      "max_concurrent_per_provider": 5
    },
    "web_search": {
      "timeout_seconds": 30,
      "cache_enabled": false,
      "cache_ttl_seconds": 3600
    },
    "unified_web_search": {
      "max_parallel_providers": 3,
      "per_provider_timeout_seconds": 30,
      "browser_providers_max_parallel": 1
    },
    "google_search": {
      "browser_reuse": true,
      "max_idle_seconds": 300,
      "max_pages_per_browser": 10,
      "cache_enabled": false,
      "cache_ttl_seconds": 1800
    }
  }
}