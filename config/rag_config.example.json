{
  "database": {
    "url": "sqlite:///data/rag.db",
    "echo": false
  },
  "llm": {
    "default": "claude",
    "dry_run": false,
    "platforms": {
      "openai": {
        "api_key": "sk-proj-xxx",
        "base_url": "https://api.openai.com/v1"
      },
      "deepseek": {
        "api_key": "sk-xxx",
        "base_url": "https://api.deepseek.com/v1"
      },
      "gemini": {
        "api_key": "AIzxxx",
        "base_url": "https://generativelanguage.googleapis.com/v1beta/openai"
      },
      "claude": {
        "api_key": "sk-ant-xxx",
        "base_url": "https://api.anthropic.com"
      },
      "kimi": {
        "api_key": "sk-xxx",
        "base_url": "https://api.moonshot.cn/v1"
      },
      "perplexity": {
        "api_key": "pplx-xxx",
        "base_url": "https://api.perplexity.ai"
      },
      "qwen": {
        "api_key": "sk-xxx",
        "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1"
      }
    },
    "_providers_note": "模型列表由前端实时从平台 API 拉取。default_model 仅在无 UI 选择时托底。params 用于 thinking 等参数注入。",
    "providers": {
      "openai":           { "platform": "openai",     "default_model": "gpt-5.2"                },
      "openai-thinking":  { "platform": "openai",     "default_model": "gpt-5.2",               "params": { "reasoning_effort": "high" } },
      "openai-mini":      { "platform": "openai",     "default_model": "gpt-5-mini"            },
      "deepseek":         { "platform": "deepseek",   "default_model": "deepseek-chat"          },
      "deepseek-thinking":{ "platform": "deepseek",   "default_model": "deepseek-reasoner",     "params": { "thinking": { "type": "enabled" } } },
      "gemini":           { "platform": "gemini",     "default_model": "gemini-3.1-pro-preview" },
      "gemini-thinking":  { "platform": "gemini",     "default_model": "gemini-3.1-pro-preview","params": { "reasoning_effort": "high" } },
      "gemini-vision":    { "platform": "gemini",     "default_model": "gemini-3.1-pro-preview","params": { "temperature": 0.2 } },
      "gemini-flash":     { "platform": "gemini",     "default_model": "gemini-flash-latest"   },
      "claude":           { "platform": "claude",     "default_model": "claude-sonnet-4-6"      },
      "claude-thinking":  { "platform": "claude",     "default_model": "claude-sonnet-4-6",     "params": { "thinking": { "type": "enabled", "budget_tokens": 10000 } } },
      "claude-haiku":     { "platform": "claude",     "default_model": "claude-haiku-4-5"      },
      "kimi":             { "platform": "kimi",       "default_model": "kimi-k2.5"              },
      "kimi-vision":      { "platform": "kimi",       "default_model": "kimi-k2.5"              },
      "kimi-thinking":    { "platform": "kimi",       "default_model": "kimi-k2.5",             "params": { "thinking": { "type": "enabled" } } },
      "sonar":            { "platform": "perplexity", "default_model": "sonar-pro"               },
      "qwen":             { "platform": "qwen",       "default_model": "qwen3.5-plus"            },
      "qwen-vision":      { "platform": "qwen",       "default_model": "qwen3.5-plus"            },
      "qwen-thinking":    { "platform": "qwen",       "default_model": "qwen3.5-plus",           "params": { "enable_thinking": true } }
    }
  },
  "parser": {
    "version": "1.0.0",
    "docling_ocr": false,
    "column_gap_min_ratio": 0.02,
    "column_gap_max_ratio": 0.15,
    "gravity_max_v_down_ratio": 0.06,
    "gravity_min_x_overlap": 0.30,
    "gravity_cross_page_penalty": 0.20,
    "caption_patterns": ["^(Fig\\.|Figure)\\s*\\d+", "^图\\s*\\d+"],
    "table_title_patterns": ["^Table\\s*\\d+", "^Tab\\.\\s*\\d+", "^表\\s*\\d+"],
    "table_footnote_patterns": ["^Note:", "^\\*", "^注[：:]", "^Source:"],
    "llm_text_provider": "deepseek",
    "llm_vision_provider": "gemini-vision",
    "llm_text_model": null,
    "llm_vision_model": null,
    "llm_vision_concurrency": 1,
    "llm_text_max_tokens": 500,
    "llm_vision_max_tokens": 1024,
    "llm_json_repair_max_tokens": 800,
    "llm_temperature": 0.1,
    "llm_max_retries": 2,
    "enrich_tables": true,
    "enrich_figures": true
  },
  "chunk": {
    "target_chars": 1000,
    "min_chars": 200,
    "max_chars": 1800,
    "overlap_sentences": 2,
    "table_rows_per_chunk": 10
  },
  "search": {
    "top_k": 20,
    "rerank_top_k": 20,
    "rrf_k": 60,
    "dense_recall_k": 80,
    "sparse_recall_k": 80,
    "rrf_dense_weight": 0.6,
    "rrf_sparse_weight": 0.4,
    "rerank_input_k": 100,
    "rerank_output_k": 20,
    "per_doc_cap": 5,
    "reranker_mode": "cascade",
    "use_colbert_reranker": true,
    "colbert_model": "jinaai/jina-colbert-v2",
    "colbert_top_k": 30
  },
  "web_search": {
    "enabled": true,
    "provider": "tavily",
    "api_key": "",
    "search_depth": "advanced",
    "max_results": 5,
    "include_answer": true,
    "include_domains": [],
    "exclude_domains": [],
    "enable_query_optimizer": true,
    "enable_query_expansion": false,
    "query_expansion_llm": "deepseek",
    "max_queries": 4
  },
  "google_search": {
    "enabled": true,
    "scholar_enabled": true,
    "google_enabled": false,
    "extension_path": "extra_tools/CapSolverExtension",
    "headless": null,
    "proxy": null,
    "timeout": 60000,
    "max_results": 5,
    "user_data_dir": null
  },
  "serpapi": {
    "enabled": false,
    "api_key": "",
    "max_results": 10,
    "timeout_seconds": 30
  },
  "semantic_scholar": {
    "enabled": false,
    "api_key": "",
    "base_url": "https://ai4scholar.net/graph/v1",
    "max_results": 5,
    "timeout_seconds": 30
  },
  "ncbi": {
    "_comment": "NCBI PubMed E-Utilities（免费，api_key 可选——填写后速率从 3 req/s 提升至 10 req/s）",
    "enabled": true,
    "api_key": "",
    "max_results": 5,
    "timeout_seconds": 20,
    "cache_ttl_seconds": 3600,
    "cache_maxsize": 256
  },
  "citation": {
    "key_format": "author_date",
    "hash_length": 12,
    "author_date_max_authors": 2,
    "merge_level": "document"
  },
  "auto_complete": {
    "enabled": true,
    "max_sections": 6,
    "max_words_per_section": 500,
    "include_abstract": true,
    "default_search_mode": "hybrid"
  },
  "performance": {
    "retrieval": {
      "timeout_seconds": 60,
      "cache_enabled": false,
      "cache_ttl_seconds": 3600,
      "parallel_dense_sparse": true,
      "max_workers": 4
    },
    "llm": {
      "timeout_seconds": 120,
      "max_retries": 2,
      "retry_backoff": 1.5,
      "cache_enabled": false,
      "cache_ttl_seconds": 3600,
      "max_concurrent_per_provider": 5
    },
    "web_search": {
      "timeout_seconds": 30,
      "cache_enabled": false,
      "cache_ttl_seconds": 3600
    },
    "unified_web_search": {
      "max_parallel_providers": 3,
      "per_provider_timeout_seconds": 30,
      "browser_providers_max_parallel": 1
    },
    "google_search": {
      "browser_reuse": true,
      "max_idle_seconds": 300,
      "max_pages_per_browser": 10,
      "cache_enabled": false,
      "cache_ttl_seconds": 1800
    }
  },
  "tasks": {
    "redis_url": "redis://localhost:6379/0",
    "max_active_slots": 2,
    "queue_max_len": 500,
    "queue_timeout_seconds": 3600,
    "run_timeout_seconds": 600,
    "heartbeat_interval_seconds": 15,
    "task_state_ttl_seconds": 86400
  }
}
