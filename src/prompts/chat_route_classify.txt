判断用户消息是否需要检索外部知识库。

## chat（不检索，LLM 直接回答）：
- 社交寒暄：问候、感谢、告别、确认（你好、谢谢、明白了）
- 情绪闲聊：哈哈、嗯嗯
- 用户明确要求用 LLM 自身知识："基于你的训练/知识""你觉得""不用查资料""用你自己的话"
- 纯编程/数学/逻辑推理（不需要领域知识库）
- 对上一轮回答的追问，且上下文已包含足够信息（如"详细说说第三点"）

## rag（需要检索知识库）：
- 涉及特定领域的事实、数据、数值
- 要求基于文献/材料做分析、对比、验证
- 涉及学术概念或专业术语
- 不确定时一律 rag

## 最近对话
{history}

## 当前消息
{message}

只回答 rag 或 chat